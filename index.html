<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Shopping Discount System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .shopping-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            max-width: 500px;
            margin: 0 auto;
        }
        .shopping-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            text-align: center;
        }
        .shopping-body {
            background: white;
            padding: 25px;
            min-height: 400px;
        }
        .product-item {
            border-left: 4px solid #667eea;
            transition: all 0.3s;
        }
        .product-item:hover {
            transform: translateX(5px);
            border-left-color: #764ba2;
        }
        .summary-item {
            border-bottom: 1px dashed #e2e8f0;
            padding: 10px 0;
        }
        .discount-badge {
            background: linear-gradient(to right, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
        }
        .payment-option {
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .payment-option.selected {
            border-color: #667eea;
            background-color: #f0f4ff;
        }
        .cashback-eligible {
            color: #10b981;
            font-weight: bold;
        }
        .cashback-not-eligible {
            color: #ef4444;
            font-weight: bold;
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
    <div class="shopping-card w-full">
        <div class="shopping-header">
            <h1 class="text-3xl font-bold text-white">ShopEasy</h1>
            <p class="text-white opacity-80">Smart discounts & shipping calculator</p>
        </div>
        
        <div class="shopping-body">
            <!-- Product Selection Section -->
            <div id="product-selection">
                <h2 class="text-xl font-bold text-gray-800 mb-4">Select Products</h2>
                
                <div class="space-y-4 mb-6">
                    <div class="product-item bg-gray-50 p-4 rounded-lg flex justify-between items-center">
                        <div>
                            <h3 class="font-semibold">Wireless Headphones</h3>
                            <p class="text-gray-600 text-sm">High-quality sound with noise cancellation</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="font-bold text-purple-600">₹1,299</span>
                            <button class="add-to-cart bg-purple-500 text-white p-2 rounded-full" data-product="Headphones" data-price="1299">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="product-item bg-gray-50 p-4 rounded-lg flex justify-between items-center">
                        <div>
                            <h3 class="font-semibold">Smart Watch</h3>
                            <p class="text-gray-600 text-sm">Track your fitness and notifications</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="font-bold text-purple-600">₹2,499</span>
                            <button class="add-to-cart bg-purple-500 text-white p-2 rounded-full" data-product="Smart Watch" data-price="2499">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="product-item bg-gray-50 p-4 rounded-lg flex justify-between items-center">
                        <div>
                            <h3 class="font-semibold">Bluetooth Speaker</h3>
                            <p class="text-gray-600 text-sm">Portable speaker with 10hr battery</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="font-bold text-purple-600">₹899</span>
                            <button class="add-to-cart bg-purple-500 text-white p-2 rounded-full" data-product="Bluetooth Speaker" data-price="899">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="product-item bg-gray-50 p-4 rounded-lg flex justify-between items-center">
                        <div>
                            <h3 class="font-semibold">Phone Case</h3>
                            <p class="text-gray-600 text-sm">Protective case for your smartphone</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="font-bold text-purple-600">₹399</span>
                            <button class="add-to-cart bg-purple-500 text-white p-2 rounded-full" data-product="Phone Case" data-price="399">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="bg-purple-50 p-4 rounded-lg mb-4">
                    <h3 class="font-semibold text-purple-800 mb-2">Your Cart</h3>
                    <div id="cart-items" class="text-sm text-gray-700">
                        <!-- Cart items will be displayed here -->
                    </div>
                    <div id="empty-cart-message" class="text-gray-500 text-center py-2">
                        Your cart is empty. Add some products!
                    </div>
                </div>
                
                <div class="mb-4">
                    <label for="delivery-location" class="block text-gray-700 mb-2">Delivery Location:</label>
                    <select id="delivery-location" class="w-full p-2 border rounded-lg">
                        <option value="within">Within City</option>
                        <option value="outside">Outside City</option>
                    </select>
                </div>
                
                <button id="proceed-to-checkout" class="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed">
                    Proceed to Checkout
                </button>
            </div>
            
            <!-- Checkout Section -->
            <div id="checkout-section" class="hidden">
                <h2 class="text-xl font-bold text-gray-800 mb-4">Checkout Summary</h2>
                
                <div class="bg-gray-50 p-4 rounded-lg mb-4">
                    <div id="checkout-items" class="mb-4">
                        <!-- Checkout items will be displayed here -->
                    </div>
                    
                    <div class="space-y-2">
                        <div class="summary-item flex justify-between">
                            <span>Subtotal:</span>
                            <span>₹<span id="subtotal">0</span></span>
                        </div>
                        
                        <div class="summary-item flex justify-between">
                            <span>Discount:</span>
                            <span id="discount-amount" class="text-green-600">-₹0</span>
                        </div>
                        
                        <div class="summary-item flex justify-between">
                            <span>Shipping:</span>
                            <span id="shipping-charge">₹0</span>
                        </div>
                        
                        <div class="summary-item flex justify-between font-bold text-lg">
                            <span>Total:</span>
                            <span>₹<span id="total-amount">0</span></span>
                        </div>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h3 class="font-semibold text-gray-700 mb-2">Select Payment Method:</h3>
                    <div class="grid grid-cols-1 gap-3">
                        <div class="payment-option" data-method="upi">
                            <div class="flex items-center">
                                <i class="fas fa-mobile-alt text-purple-500 text-xl mr-3"></i>
                                <div>
                                    <div class="font-semibold">UPI Payment</div>
                                    <div class="text-sm text-gray-600">Pay using UPI apps</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="payment-option" data-method="credit">
                            <div class="flex items-center">
                                <i class="far fa-credit-card text-purple-500 text-xl mr-3"></i>
                                <div>
                                    <div class="font-semibold">Credit Card</div>
                                    <div class="text-sm text-gray-600">Visa, MasterCard, etc.</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="payment-option" data-method="cod">
                            <div class="flex items-center">
                                <i class="fas fa-money-bill-wave text-purple-500 text-xl mr-3"></i>
                                <div>
                                    <div class="font-semibold">Cash on Delivery</div>
                                    <div class="text-sm text-gray-600">Pay when item is delivered</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="cashback-message" class="mb-4 text-center p-2 rounded-lg">
                    <!-- Cashback eligibility message will appear here -->
                </div>
                
                <div id="cod-restriction" class="hidden bg-yellow-50 border border-yellow-200 p-3 rounded-lg mb-4">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle text-yellow-500 mr-2"></i>
                        <span class="text-yellow-700">COD is only available for orders ≤ ₹3000 and within city delivery</span>
                    </div>
                </div>
                
                <div class="flex space-x-3">
                    <button id="back-to-cart" class="bg-gray-500 text-white py-2 px-4 rounded-lg flex-1 hover:bg-gray-600 transition-colors">
                        Back to Cart
                    </button>
                    <button id="place-order" class="bg-purple-600 text-white py-2 px-4 rounded-lg flex-1 hover:bg-purple-700 transition-colors">
                        Place Order
                    </button>
                </div>
            </div>
            
            <!-- Order Confirmation -->
            <div id="order-confirmation" class="hidden text-center">
                <div class="mb-6">
                    <i class="fas fa-check-circle text-green-500 text-5xl mb-4"></i>
                    <h2 class="text-2xl font-bold text-gray-800">Order Placed Successfully!</h2>
                    <p class="text-gray-600 mt-2">Thank you for shopping with us</p>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg mb-6 text-left">
                    <h3 class="font-semibold mb-2">Order Summary:</h3>
                    <div class="space-y-1 text-sm">
                        <div class="flex justify-between">
                            <span>Items:</span>
                            <span>₹<span id="confirm-subtotal">0</span></span>
                        </div>
                        <div class="flex justify-between">
                            <span>Discount:</span>
                            <span class="text-green-600">-₹<span id="confirm-discount">0</span></span>
                        </div>
                        <div class="flex justify-between">
                            <span>Shipping:</span>
                            <span>₹<span id="confirm-shipping">0</span></span>
                        </div>
                        <div class="flex justify-between font-semibold">
                            <span>Total:</span>
                            <span>₹<span id="confirm-total">0</span></span>
                        </div>
                        <div class="flex justify-between mt-2">
                            <span>Payment Method:</span>
                            <span id="confirm-payment" class="font-semibold"></span>
                        </div>
                        <div class="flex justify-between">
                            <span>Cashback:</span>
                            <span id="confirm-cashback" class="font-semibold"></span>
                        </div>
                    </div>
                </div>
                
                <button id="shop-again" class="bg-purple-600 text-white py-2 px-6 rounded-lg hover:bg-purple-700 transition-colors">
                    Shop Again
                </button>
            </div>
        </div>
    </div>

    <script>
        // Shopping cart data
        let cart = [];
        let selectedPaymentMethod = null;
        let deliveryLocation = 'within';

        // DOM elements
        const productSelection = document.getElementById('product-selection');
        const checkoutSection = document.getElementById('checkout-section');
        const orderConfirmation = document.getElementById('order-confirmation');
        const cartItems = document.getElementById('cart-items');
        const emptyCartMessage = document.getElementById('empty-cart-message');
        const checkoutItems = document.getElementById('checkout-items');
        const proceedButton = document.getElementById('proceed-to-checkout');
        const deliverySelect = document.getElementById('delivery-location');
        const codRestriction = document.getElementById('cod-restriction');

        // Initialize the application
        function init() {
            updateCartDisplay();
            setupEventListeners();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Add to cart buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const product = e.target.closest('.add-to-cart').dataset.product;
                    const price = parseInt(e.target.closest('.add-to-cart').dataset.price);
                    addToCart(product, price);
                });
            });

            // Proceed to checkout
            proceedButton.addEventListener('click', proceedToCheckout);

            // Back to cart
            document.getElementById('back-to-cart').addEventListener('click', backToCart);

            // Place order
            document.getElementById('place-order').addEventListener('click', placeOrder);

            // Shop again
            document.getElementById('shop-again').addEventListener('click', shopAgain);

            // Payment method selection
            document.querySelectorAll('.payment-option').forEach(option => {
                option.addEventListener('click', (e) => {
                    selectPaymentMethod(e.currentTarget.dataset.method);
                });
            });

            // Delivery location change
            deliverySelect.addEventListener('change', (e) => {
                deliveryLocation = e.target.value;
                updateCheckoutSummary();
                checkCODRestrictions();
            });
        }

        // Add product to cart
        function addToCart(product, price) {
            // Check if product already in cart
            const existingItem = cart.find(item => item.product === product);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    product: product,
                    price: price,
                    quantity: 1
                });
            }
            
            updateCartDisplay();
            
            // Show animation on the added product button
            const button = document.querySelector(`.add-to-cart[data-product="${product}"]`);
            button.classList.add('pulse');
            setTimeout(() => {
                button.classList.remove('pulse');
            }, 600);
        }

        // Update cart display
        function updateCartDisplay() {
            // Requirement 1: Check if cart has at least 1 item
            if (cart.length > 0) {
                emptyCartMessage.style.display = 'none';
                cartItems.innerHTML = '';
                
                cart.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'flex justify-between py-1';
                    itemElement.innerHTML = `
                        <span>${item.product} (x${item.quantity})</span>
                        <span>₹${item.price * item.quantity}</span>
                    `;
                    cartItems.appendChild(itemElement);
                });
                
                proceedButton.disabled = false;
            } else {
                emptyCartMessage.style.display = 'block';
                cartItems.innerHTML = '';
                proceedButton.disabled = true;
            }
        }

        // Proceed to checkout
        function proceedToCheckout() {
            // Requirement 1: if - Check if cart has at least 1 item
            if (cart.length === 0) {
                alert('Your cart is empty. Please add items before proceeding to checkout.');
                return;
            }
            
            productSelection.classList.add('hidden');
            checkoutSection.classList.remove('hidden');
            updateCheckoutSummary();
        }

        // Update checkout summary
        function updateCheckoutSummary() {
            // Calculate subtotal
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('subtotal').textContent = subtotal.toLocaleString();
            
            // Requirement 3: if...else if...else - Apply discounts
            let discountRate = 0;
            if (subtotal >= 2000) {
                discountRate = 0.2; // 20%
            } else if (subtotal >= 1000) {
                discountRate = 0.1; // 10%
            } else if (subtotal >= 500) {
                discountRate = 0.05; // 5%
            } else {
                discountRate = 0; // No discount
            }
            
            const discountAmount = Math.round(subtotal * discountRate);
            document.getElementById('discount-amount').textContent = `-₹${discountAmount.toLocaleString()}`;
            
            // Requirement 2: if...else - Shipping charges
            let shippingCharge = 0;
            if (subtotal >= 500) {
                shippingCharge = 0; // Free shipping
            } else {
                shippingCharge = 50; // ₹50 shipping charge
            }
            document.getElementById('shipping-charge').textContent = `₹${shippingCharge}`;
            
            // Calculate total
            const total = subtotal - discountAmount + shippingCharge;
            document.getElementById('total-amount').textContent = total.toLocaleString();
            
            // Update checkout items
            checkoutItems.innerHTML = '';
            cart.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'flex justify-between py-1';
                itemElement.innerHTML = `
                    <span>${item.product} (x${item.quantity})</span>
                    <span>₹${item.price * item.quantity}</span>
                `;
                checkoutItems.appendChild(itemElement);
            });
            
            // Show discount badge if applicable
            if (discountRate > 0) {
                const discountBadge = document.createElement('div');
                discountBadge.className = 'discount-badge text-center mt-2';
                discountBadge.textContent = `You saved ₹${discountAmount} (${discountRate * 100}% discount)!`;
                checkoutItems.appendChild(discountBadge);
            }
            
            // Update cashback message based on selected payment
            if (selectedPaymentMethod) {
                updateCashbackMessage();
            }
            
            // Check COD restrictions
            checkCODRestrictions();
        }

        // Select payment method
        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            // Update UI
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`.payment-option[data-method="${method}"]`).classList.add('selected');
            
            // Requirement 4: switch - Choose payment method
            let paymentText = '';
            switch(method) {
                case 'upi':
                    paymentText = 'UPI';
                    break;
                case 'credit':
                    paymentText = 'Credit Card';
                    break;
                case 'cod':
                    paymentText = 'Cash on Delivery';
                    break;
                default:
                    paymentText = 'Unknown';
            }
            
            // Update cashback message
            updateCashbackMessage();
            
            // Check COD restrictions
            checkCODRestrictions();
        }

        // Requirement 5: ternary - Show cashback eligibility
        function updateCashbackMessage() {
            const cashbackMessage = document.getElementById('cashback-message');
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            // Digital payments (UPI, Credit Card) are eligible for cashback
            const isDigitalPayment = selectedPaymentMethod === 'upi' || selectedPaymentMethod === 'credit';
            
            // Ternary operator to determine message
            const message = isDigitalPayment 
                ? '<span class="cashback-eligible">✓ Eligible for 5% cashback on this order!</span>' 
                : '<span class="cashback-not-eligible">❌ Not eligible for cashback</span>';
            
            cashbackMessage.innerHTML = message;
        }

        // Requirement 6: logical operators - Check COD restrictions
        function checkCODRestrictions() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const placeOrderButton = document.getElementById('place-order');
            
            // COD is only available if amount ≤ ₹3000 AND delivery is within the city
            if (selectedPaymentMethod === 'cod' && (subtotal > 3000 || deliveryLocation !== 'within')) {
                codRestriction.classList.remove('hidden');
                placeOrderButton.disabled = true;
                placeOrderButton.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                codRestriction.classList.add('hidden');
                placeOrderButton.disabled = false;
                placeOrderButton.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        // Back to cart
        function backToCart() {
            checkoutSection.classList.add('hidden');
            productSelection.classList.remove('hidden');
        }

        // Place order
        function placeOrder() {
            // Final validation
            if (!selectedPaymentMethod) {
                alert('Please select a payment method.');
                return;
            }
            
            // Check COD restrictions one more time
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            if (selectedPaymentMethod === 'cod' && (subtotal > 3000 || deliveryLocation !== 'within')) {
                alert('COD is not available for this order. Please select a different payment method.');
                return;
            }
            
            // Calculate final amounts
            const subtotalAmount = subtotal;
            
            let discountRate = 0;
            if (subtotal >= 2000) {
                discountRate = 0.2;
            } else if (subtotal >= 1000) {
                discountRate = 0.1;
            } else if (subtotal >= 500) {
                discountRate = 0.05;
            }
            
            const discountAmount = Math.round(subtotal * discountRate);
            const shippingCharge = subtotal >= 500 ? 0 : 50;
            const totalAmount = subtotal - discountAmount + shippingCharge;
            
            // Update confirmation screen
            document.getElementById('confirm-subtotal').textContent = subtotalAmount.toLocaleString();
            document.getElementById('confirm-discount').textContent = discountAmount.toLocaleString();
            document.getElementById('confirm-shipping').textContent = shippingCharge;
            document.getElementById('confirm-total').textContent = totalAmount.toLocaleString();
            
            // Set payment method text
            let paymentText = '';
            switch(selectedPaymentMethod) {
                case 'upi':
                    paymentText = 'UPI';
                    break;
                case 'credit':
                    paymentText = 'Credit Card';
                    break;
                case 'cod':
                    paymentText = 'Cash on Delivery';
                    break;
            }
            document.getElementById('confirm-payment').textContent = paymentText;
            
            // Set cashback eligibility
            const isDigitalPayment = selectedPaymentMethod === 'upi' || selectedPaymentMethod === 'credit';
            document.getElementById('confirm-cashback').textContent = isDigitalPayment ? 'Eligible (5%)' : 'Not Eligible';
            document.getElementById('confirm-cashback').className = isDigitalPayment ? 'cashback-eligible' : 'cashback-not-eligible';
            
            // Show confirmation
            checkoutSection.classList.add('hidden');
            orderConfirmation.classList.remove('hidden');
        }

        // Shop again
        function shopAgain() {
            // Reset cart and selections
            cart = [];
            selectedPaymentMethod = null;
            deliveryLocation = 'within';
            deliverySelect.value = 'within';
            
            // Reset UI
            orderConfirmation.classList.add('hidden');
            productSelection.classList.remove('hidden');
            updateCartDisplay();
            
            // Reset payment selection
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            codRestriction.classList.add('hidden');
        }

        // Initialize the application
        init();
    </script>
</body>
</html>